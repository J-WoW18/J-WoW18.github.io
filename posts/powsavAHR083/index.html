<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="POWSAV - AHR-083" /><meta property="og:locale" content="en" /><meta name="description" content="Eight AC outlets with four always on, four smart outlets and four USB-A ports. Looking up information online this looks to have a BK7321X chip so hopefully a good candidate to flash and convert to local control with integrations over ESPHome and Home Assistant." /><meta property="og:description" content="Eight AC outlets with four always on, four smart outlets and four USB-A ports. Looking up information online this looks to have a BK7321X chip so hopefully a good candidate to flash and convert to local control with integrations over ESPHome and Home Assistant." /><link rel="canonical" href="/posts/powsavAHR083/" /><meta property="og:url" content="/posts/powsavAHR083/" /><meta property="og:site_name" content="J-WoW Learn 2 Code" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-02-03T09:00:00-08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="POWSAV - AHR-083" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-04T07:03:02-08:00","datePublished":"2024-02-03T09:00:00-08:00","description":"Eight AC outlets with four always on, four smart outlets and four USB-A ports. Looking up information online this looks to have a BK7321X chip so hopefully a good candidate to flash and convert to local control with integrations over ESPHome and Home Assistant.","headline":"POWSAV - AHR-083","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/powsavAHR083/"},"url":"/posts/powsavAHR083/"}</script><title>POWSAV - AHR-083 | J-WoW Learn 2 Code</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="J-WoW Learn 2 Code"><meta name="application-name" content="J-WoW Learn 2 Code"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/J_WOW.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">J-WoW Learn 2 Code</a></div><div class="site-subtitle font-italic">Documentation of projects and learning</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>POWSAV - AHR-083</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>POWSAV - AHR-083</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1706979600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 3, 2024 </em> </span> <span> Updated <em class="" data-ts="1707058982" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 4, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.youtube.com/@jwowvsworld">J-WoW</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="845 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><ul><li>Eight AC outlets with four always on, four smart outlets and four USB-A ports. Looking up information online this looks to have a BK7321X chip so hopefully a good candidate to flash and convert to local control with integrations over ESPHome and Home Assistant.</ul><h1 id="device-info">Device Info</h1><ul><li>Model: AHR-083<li>FCC ID: 2amxxahr083<h2 id="acquisition"><span class="mr-2">Acquisition</span><a href="#acquisition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><li>Purchased from Amazon. ~$27.00 + Tax. Four Smart outlets, so roughly $7 per smart outlet. Cheaper than some of the alternative one plug smart outlets.<ul><li>https://www.amazon.com/Protector-POWSAV-Outlets-Always-Extension/dp/B0B5G6MDQ6?ref_=ast_sto_dp&amp;th=1<h2 id="fcc-lookup"><span class="mr-2">FCC lookup</span><a href="#fcc-lookup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></ul><li>Loking up the FCC ID online<ul><li>https://fcc.report/FCC-ID/2amxxahr083</ul><li>Model Differences Memo</ul><p><a href="/assets/ab638177d8319fd425f39220b6afb5da.png" class="popup img-link "><img data-src="/assets/ab638177d8319fd425f39220b6afb5da.png" alt="ab638177d8319fd425f39220b6afb5da.png" class="lazyload" data-proofer-ignore></a></p><h2 id="internal-photos"><span class="mr-2">Internal Photos</span><a href="#internal-photos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Looks like a WB3S Module</ul><p><a href="/assets/1e219fde4748e58f1cce899097126be3.png" class="popup img-link "><img data-src="/assets/1e219fde4748e58f1cce899097126be3.png" alt="1e219fde4748e58f1cce899097126be3.png" class="lazyload" data-proofer-ignore></a></p><h2 id="wb3s-module"><span class="mr-2">WB3S Module</span><a href="#wb3s-module" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Looking up the module<ul><li>https://developer.tuya.com/en/docs/iot/wb3s-module-datasheet?id=K9dx20n6hz5n4</ul></ul><p><a href="/assets/efcb2687237e1121ff868e7c7620ff0e.png" class="popup img-link "><img data-src="/assets/efcb2687237e1121ff868e7c7620ff0e.png" alt="efcb2687237e1121ff868e7c7620ff0e.png" class="lazyload" data-proofer-ignore></a></p><h1 id="wireless-exploits">Wireless Exploits</h1><ul><li>Try to flash the power strip remotely first. If it doesn’t work then will just open up and direct connect to read and write to the chip.<h2 id="tuya-cloudcutter"><span class="mr-2">Tuya-Cloudcutter</span><a href="#tuya-cloudcutter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><li>https://github.com/tuya-cloudcutter/tuya-cloudcutter<ul><li>“This repository contains the toolchain to exploit a wireless vulnerability that can jailbreak some of the latest smart devices built with the bk7231 chipset under various brand names by Tuya. “</ul><li>Setup local copy running on a raspberry pi 4b (8GB RAM)<h2 id="results"><span class="mr-2">Results</span><a href="#results" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><li>Worked through the prompts in Tuya-Cloudcutter <a href="/assets/d4527d452b1b0dda590139f7a1693413.png" class="popup img-link "><img data-src="/assets/d4527d452b1b0dda590139f7a1693413.png" alt="d4527d452b1b0dda590139f7a1693413.png" class="lazyload" data-proofer-ignore></a><li>After some restarts and connections through the prompts…</ul><p><a href="/assets/6b8c21dd5b35fb345272390b9628bf2d.png" class="popup img-link "><img data-src="/assets/6b8c21dd5b35fb345272390b9628bf2d.png" alt="6b8c21dd5b35fb345272390b9628bf2d.png" class="lazyload" data-proofer-ignore></a></p><ul><li><strong>Did not work » exploit unsuccessful</strong><li>Plan B it is… Cracking it open</ul><h1 id="teardown--connections">Teardown &amp; Connections</h1><h2 id="external-photos"><span class="mr-2">External Photos</span><a href="#external-photos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Top and bottom view of the powerstrip</ul><p><a href="https://github.com/J-WoW18/J-WoW18.github.io/assets/45716998/c8a07204-cec0-4615-93e6-e6c6e52502e1" class="popup img-link "><img data-src="https://github.com/J-WoW18/J-WoW18.github.io/assets/45716998/c8a07204-cec0-4615-93e6-e6c6e52502e1" alt="image" class="lazyload" data-proofer-ignore></a></p><p><a href="https://github.com/J-WoW18/J-WoW18.github.io/assets/45716998/b22f82f5-f91d-4fbe-a81e-1915111d1fd7" class="popup img-link "><img data-src="https://github.com/J-WoW18/J-WoW18.github.io/assets/45716998/b22f82f5-f91d-4fbe-a81e-1915111d1fd7" alt="image" class="lazyload" data-proofer-ignore></a></p><h2 id="internal-photos-1"><span class="mr-2">Internal Photos</span><a href="#internal-photos-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Pinout mapping for serial to usb from stock WB3S image online</ul><p><a href="/assets/ac98bc32dfad081c2c47e90f09ead5d0.png" class="popup img-link "><img data-src="/assets/ac98bc32dfad081c2c47e90f09ead5d0.png" alt="ac98bc32dfad081c2c47e90f09ead5d0.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Connectin the pins</ul><p><a href="/assets/00ff8f40401005784dcac452c7d77731.png" class="popup img-link "><img data-src="/assets/00ff8f40401005784dcac452c7d77731.png" alt="00ff8f40401005784dcac452c7d77731.png" class="lazyload" data-proofer-ignore></a></p><h1 id="firmware-dump">Firmware Dump</h1><ul><li>Serial to USB converter connected up to computer and ltchiptool was used to interact with the WB3S module.<ul><li>https://github.com/libretiny-eu/ltchiptool</ul></ul><h2 id="chip-info"><span class="mr-2">Chip Info</span><a href="#chip-info" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Reading the chip info</ul><p><a href="/assets/84b762ce8f8d894416bb518c61861bd0.png" class="popup img-link "><img data-src="/assets/84b762ce8f8d894416bb518c61861bd0.png" alt="84b762ce8f8d894416bb518c61861bd0.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Looks like the bootloader version is <code class="language-plaintext highlighter-rouge">1.0.5</code> and the Cloud-Cutter version was expecting <code class="language-plaintext highlighter-rouge">1.1.8</code> so… maybe that’s why it didn’t work?</ul><h2 id="read-flash"><span class="mr-2">Read Flash</span><a href="#read-flash" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>Saving the firmware</p><li><p>Reading firmware back to get pin information and configurations</p></ul><p><a href="/assets/45c7656781d15ff98e4f847f7fe8e1fd.png" class="popup img-link "><img data-src="/assets/45c7656781d15ff98e4f847f7fe8e1fd.png" alt="45c7656781d15ff98e4f847f7fe8e1fd.png" class="lazyload" data-proofer-ignore></a></p><h2 id="write-esphome-kickstart"><span class="mr-2">Write ESPHome-Kickstart</span><a href="#write-esphome-kickstart" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Instead of setting up a device in ESPHome and downloading the firmware to flash with the direct connection will try out the kickstart flash approach.<li>Download the latest kickstart firmware<ul><li>https://github.com/libretiny-eu/esphome-kickstart/releases/tag/v23.12.15<li>For this device select » <code class="language-plaintext highlighter-rouge">kickstart-bk7231t-2023-12-15.uf2</code></ul><li>Write the <code class="language-plaintext highlighter-rouge">kickstart-bk7231t-2023-12-15.uf2</code> to the chip using LTChiptool<li>Power cycle the device and the WIFI AP should appear<li>Connect to AP and the portal should open in the browser<li>Enter Wifi for IOT network and once it joins it pops up in Home Assistant<li>Add the device to integrations</ul><h1 id="esphome">ESPHome</h1><h2 id="esphome-config"><span class="mr-2">ESPHome Config</span><a href="#esphome-config" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>With the device added in Home Assistant final touches can be made to clean up config and add static WIFI address.</ul><div class="language-yml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre><td class="rouge-code"><pre><span class="na">esphome</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">upk2esphome-bk7231t</span>
<span class="na">bk72xx</span><span class="pi">:</span>
  <span class="na">board</span><span class="pi">:</span> <span class="s">generic-bk7231t-qfn32-tuya</span>
<span class="na">logger</span><span class="pi">:</span>
<span class="c1">#web_server:</span>
<span class="c1">#captive_portal:</span>
<span class="na">mdns</span><span class="pi">:</span>
<span class="na">api</span><span class="pi">:</span>
<span class="na">ota</span><span class="pi">:</span>
<span class="na">wifi</span><span class="pi">:</span>
  <span class="na">ssid</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">wifi_ssid2</span>
  <span class="na">password</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">wifi_password2</span>
  <span class="na">fast_connect</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">manual_ip</span><span class="pi">:</span>
    <span class="na">static_ip</span><span class="pi">:</span> <span class="s">192.168.X0.XX</span>
    <span class="na">gateway</span><span class="pi">:</span> <span class="s">192.168.X0.1</span>
    <span class="na">subnet</span><span class="pi">:</span> <span class="s">255.255.255.0</span>
    <span class="na">dns1</span><span class="pi">:</span> <span class="s">192.168.X0.1</span>
<span class="na">text_sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">libretiny</span>
    <span class="na">version</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">LibreTiny Version</span>
<span class="na">switch</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">gpio</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">switch_1</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Relay </span><span class="m">1</span>
    <span class="na">pin</span><span class="pi">:</span> <span class="s">P7</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">gpio</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">switch_2</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Relay </span><span class="m">2</span>
    <span class="na">pin</span><span class="pi">:</span> <span class="s">P26</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">gpio</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">switch_3</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Relay </span><span class="m">3</span>
    <span class="na">pin</span><span class="pi">:</span> <span class="s">P24</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">gpio</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">switch_4</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Relay </span><span class="m">4</span>
    <span class="na">pin</span><span class="pi">:</span> <span class="s">P6</span>
<span class="na">binary_sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">gpio</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">binary_switch_all</span>
    <span class="na">pin</span><span class="pi">:</span>
      <span class="na">number</span><span class="pi">:</span> <span class="s">P8</span>
      <span class="na">inverted</span><span class="pi">:</span> <span class="kc">true</span>
      <span class="na">mode</span><span class="pi">:</span> <span class="s">INPUT_PULLUP</span>
    <span class="na">on_press</span><span class="pi">:</span>
      <span class="na">then</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">switch.toggle</span><span class="pi">:</span> <span class="s">switch_1</span>
        <span class="pi">-</span> <span class="na">switch.toggle</span><span class="pi">:</span> <span class="s">switch_2</span>
        <span class="pi">-</span> <span class="na">switch.toggle</span><span class="pi">:</span> <span class="s">switch_3</span>
        <span class="pi">-</span> <span class="na">switch.toggle</span><span class="pi">:</span> <span class="s">switch_4</span>
<span class="na">status_led</span><span class="pi">:</span>
  <span class="na">pin</span><span class="pi">:</span>
    <span class="na">number</span><span class="pi">:</span> <span class="s">P9</span>
    <span class="na">inverted</span><span class="pi">:</span> <span class="kc">true</span>
</pre></table></code></div></div><ul><li>The device can be OTA updated since it is already integrated with Home Assistant</ul><h2 id="esphome-operation"><span class="mr-2">ESPHome Operation</span><a href="#esphome-operation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>After OTA check out the device and try out the relay controls in ESPHome Dashboard</ul><p><a href="/assets/72c3eaa2b5908b0a8b628eb62495ab45.png" class="popup img-link "><img data-src="/assets/72c3eaa2b5908b0a8b628eb62495ab45.png" alt="72c3eaa2b5908b0a8b628eb62495ab45.png" class="lazyload" data-proofer-ignore></a></p><h1 id="final-thoughts">Final Thoughts</h1><ul><li>Although couldnt get the Tuya-CloudCutter to work the direct flash method using ESPhome-Kickstart was straight forward. With having access to the pin information and the YAML output provided in LTChiptool it might be better to just build the config in ESPHome, download and flash the firmware to reduce the steps and files needed.<li>Powerstrip seems solid overall and look forward to having allways on options as well as individual switched outlets all on the same powerstrip.</ul><h1 id="second-chance---tuya-cloudcutter">Second Chance - Tuya-CloudCutter</h1><ul><li>Ordered a second one of these from amazon more recently than the first one. There might be a chance that this second one has a more up to date firmware that is compatible with the cloudcutter.<h2 id="running-cloudcutter"><span class="mr-2">Running CloudCutter</span><a href="#running-cloudcutter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><li>Fresh build of docker image</ul><p><a href="/assets/99454e8f28b8e72dd0f0991d8d1e49ca.png" class="popup img-link "><img data-src="/assets/99454e8f28b8e72dd0f0991d8d1e49ca.png" alt="99454e8f28b8e72dd0f0991d8d1e49ca.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Prompt and selections</ul><p><a href="/assets/577e326cb0e735620523167b4c50b8b8.png" class="popup img-link "><img data-src="/assets/577e326cb0e735620523167b4c50b8b8.png" alt="577e326cb0e735620523167b4c50b8b8.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Put device in slow blink mode and script connects and does it’s magic. One physical power off and on required here.</ul><p><a href="/assets/78b75ebd6c5428da0b936b937bc11c61.png" class="popup img-link "><img data-src="/assets/78b75ebd6c5428da0b936b937bc11c61.png" alt="78b75ebd6c5428da0b936b937bc11c61.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Made it to the final step! Flashing the ESPHome-Kicktart firmware!</ul><p><a href="/assets/207a9fcca3e753028cdc5df0479acd61.png" class="popup img-link "><img data-src="/assets/207a9fcca3e753028cdc5df0479acd61.png" alt="207a9fcca3e753028cdc5df0479acd61.png" class="lazyload" data-proofer-ignore></a></p><h2 id="connecting-to-new-kickstart-ap"><span class="mr-2">Connecting to new kickstart AP</span><a href="#connecting-to-new-kickstart-ap" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Connecting to AP and going to web browser<li>In ESPHome, build a new device and copy the YAML settings from the other POWSAV power strip. Rename and change WIFI settings.</ul><p><a href="/assets/ebb26a29c918d03f201522e6f9ee63ff.png" class="popup img-link "><img data-src="/assets/ebb26a29c918d03f201522e6f9ee63ff.png" alt="ebb26a29c918d03f201522e6f9ee63ff.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Once OTA upload submitted <code class="language-plaintext highlighter-rouge">new device notification</code> pops up in Home Assistant<li>Accepting then integration and trying out the relays in ESPHome</ul><p><a href="/assets/c5e38026eee61ebcbec83a0c80bf4abe.png" class="popup img-link "><img data-src="/assets/c5e38026eee61ebcbec83a0c80bf4abe.png" alt="c5e38026eee61ebcbec83a0c80bf4abe.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Looks successful and works as it should. Nice to not have to do a teardown to flash and then put it all back together.</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/homelab/'>homelab</a>, <a href='/categories/iot/'>IOT</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/bk7321t/" class="post-tag no-text-decoration" >bk7321t</a> <a href="/tags/iot/" class="post-tag no-text-decoration" >iot</a> <a href="/tags/powsav/" class="post-tag no-text-decoration" >powsav</a> <a href="/tags/wifi/" class="post-tag no-text-decoration" >wifi</a> <a href="/tags/bt/" class="post-tag no-text-decoration" >bt</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=POWSAV%20-%20AHR-083%20-%20J-WoW%20Learn%202%20Code&url=%2Fposts%2FpowsavAHR083%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=POWSAV%20-%20AHR-083%20-%20J-WoW%20Learn%202%20Code&u=%2Fposts%2FpowsavAHR083%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FpowsavAHR083%2F&text=POWSAV%20-%20AHR-083%20-%20J-WoW%20Learn%202%20Code" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/UtilitechUTTNOREM2/">Utilitech - UTTNOREM2</a><li><a href="/posts/enbrightenWFD4103/">Enbrighten - WFD4103</a><li><a href="/posts/powsavAHR083/">POWSAV - AHR-083</a><li><a href="/posts/enbrightenWDF4204/">Enbrighten - WFD4204</a><li><a href="/posts/enbrightenWFD4203E/">Enbrighten - WFD4203E</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bt/">bt</a> <a class="post-tag" href="/tags/iot/">iot</a> <a class="post-tag" href="/tags/wifi/">wifi</a> <a class="post-tag" href="/tags/enbrighten/">enbrighten</a> <a class="post-tag" href="/tags/bk7321t/">bk7321t</a> <a class="post-tag" href="/tags/bk7321n/">bk7321n</a> <a class="post-tag" href="/tags/hackrf/">hackrf</a> <a class="post-tag" href="/tags/powsav/">powsav</a> <a class="post-tag" href="/tags/rf/">rf</a> <a class="post-tag" href="/tags/urh/">urh</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/enbrightenWFD4201E/"><div class="card-body"> <em class="small" data-ts="1706965200" data-df="ll" > Feb 3, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Enbrighten - WFD4201E</h3><div class="text-muted small"><p> I picked up this dual outdoor smart switch at the local return auction this week. When I see items like this I typically just bid the minimum and if I win…great. Device Info I start wit...</p></div></div></a></div><div class="card"> <a href="/posts/enbrightenWFD4103/"><div class="card-body"> <em class="small" data-ts="1707670800" data-df="ll" > Feb 11, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Enbrighten - WFD4103</h3><div class="text-muted small"><p> Single smart outlet plug by Enbrighten picked up at the local auction return this week. Below captures my thought process and notes as I attempted to get this flashed over to ESPHome and Home ...</p></div></div></a></div><div class="card"> <a href="/posts/enbrightenWFD4203E/"><div class="card-body"> <em class="small" data-ts="1706979600" data-df="ll" > Feb 3, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Enbrighten - WFD4203E</h3><div class="text-muted small"><p> Dual outdoor smart switch by Enbrighten picked up at the local auction return this week. Device Info Model: WFD4203E FCC ID: QOB-WFD4203 Acquisition Another cheap win at only...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/enbrightenWFD4203E/" class="btn btn-outline-primary" prompt="Older"><p>Enbrighten - WFD4203E</p></a> <a href="/posts/enbrightenWDF4204/" class="btn btn-outline-primary" prompt="Newer"><p>Enbrighten - WFD4204</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bt/">bt</a> <a class="post-tag" href="/tags/iot/">iot</a> <a class="post-tag" href="/tags/wifi/">wifi</a> <a class="post-tag" href="/tags/enbrighten/">enbrighten</a> <a class="post-tag" href="/tags/bk7321t/">bk7321t</a> <a class="post-tag" href="/tags/bk7321n/">bk7321n</a> <a class="post-tag" href="/tags/hackrf/">hackrf</a> <a class="post-tag" href="/tags/powsav/">powsav</a> <a class="post-tag" href="/tags/rf/">rf</a> <a class="post-tag" href="/tags/urh/">urh</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://www.youtube.com/@jwowvsworld">J-WoW</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
