<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Enbrighten - WFD4204" /><meta property="og:locale" content="en" /><meta name="description" content="Device Info Model # 74517 - WDF4204 FCC ID: QOBWFD4204" /><meta property="og:description" content="Device Info Model # 74517 - WDF4204 FCC ID: QOBWFD4204" /><link rel="canonical" href="/posts/enbrightenWDF4204/" /><meta property="og:url" content="/posts/enbrightenWDF4204/" /><meta property="og:site_name" content="J-WoW Learn 2 Code" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-02-03T12:00:00-08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Enbrighten - WFD4204" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-03T13:03:25-08:00","datePublished":"2024-02-03T12:00:00-08:00","description":"Device Info Model # 74517 - WDF4204 FCC ID: QOBWFD4204","headline":"Enbrighten - WFD4204","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/enbrightenWDF4204/"},"url":"/posts/enbrightenWDF4204/"}</script><title>Enbrighten - WFD4204 | J-WoW Learn 2 Code</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="J-WoW Learn 2 Code"><meta name="application-name" content="J-WoW Learn 2 Code"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/J_WOW.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">J-WoW Learn 2 Code</a></div><div class="site-subtitle font-italic">Documentation of projects and learning</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Enbrighten - WFD4204</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Enbrighten - WFD4204</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1706990400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 3, 2024 </em> </span> <span> Updated <em class="" data-ts="1706994205" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 3, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://www.youtube.com/@jwowvsworld">J-WoW</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="857 words"> <em>4 min</em> read</span></div></div></div><div class="post-content"><h1 id="device-info">Device Info</h1><ul><li>Model # 74517 - WDF4204<li>FCC ID: QOBWFD4204</ul><p><a href="/assets/058897c32dc854df8ef4bddc1050b2fa.png" class="popup img-link "><img data-src="/assets/058897c32dc854df8ef4bddc1050b2fa.png" alt="058897c32dc854df8ef4bddc1050b2fa.png" class="lazyload" data-proofer-ignore></a></p><h2 id="acquisition"><span class="mr-2">Acquisition</span><a href="#acquisition" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Got this 6 outlet smart outdoor yard stake from the local return auction for $2.50. Normally these go for $10-20.</ul><p><a href="/assets/9214bdeb77b6b3c3129aa366874ab1c2.png" class="popup img-link "><img data-src="/assets/9214bdeb77b6b3c3129aa366874ab1c2.png" alt="9214bdeb77b6b3c3129aa366874ab1c2.png" class="lazyload" data-proofer-ignore></a></p><h2 id="fcc-id-lookup"><span class="mr-2">FCC ID Lookup</span><a href="#fcc-id-lookup" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Look up the model number online to get an idea of what to expect inside<ul><li>https://fccid.io/QOBWFD4204<h3 id="internal-photos"><span class="mr-2">Internal Photos</span><a href="#internal-photos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/7cc6620ee619cbf3412c1c0694ee4f77.png" class="popup img-link "><img data-src="/assets/7cc6620ee619cbf3412c1c0694ee4f77.png" alt="7cc6620ee619cbf3412c1c0694ee4f77.png" class="lazyload" data-proofer-ignore></a> <a href="/assets/9b4a0547f6d00463ecdc42ade6fe8e1d.png" class="popup img-link "><img data-src="/assets/9b4a0547f6d00463ecdc42ade6fe8e1d.png" alt="9b4a0547f6d00463ecdc42ade6fe8e1d.png" class="lazyload" data-proofer-ignore></a> <a href="/assets/b74d7de8b6032e6a3b5eb346a8292119.png" class="popup img-link "><img data-src="/assets/b74d7de8b6032e6a3b5eb346a8292119.png" alt="b74d7de8b6032e6a3b5eb346a8292119.png" class="lazyload" data-proofer-ignore></a> <a href="/assets/ef3195d5b18181be38bcb354c49f4a76.png" class="popup img-link "><img data-src="/assets/ef3195d5b18181be38bcb354c49f4a76.png" alt="ef3195d5b18181be38bcb354c49f4a76.png" class="lazyload" data-proofer-ignore></a> <a href="/assets/9a2dc3983688e1fad1430294a61f27fa.png" class="popup img-link "><img data-src="/assets/9a2dc3983688e1fad1430294a61f27fa.png" alt="9a2dc3983688e1fad1430294a61f27fa.png" class="lazyload" data-proofer-ignore></a></p><h3 id="user-manual"><span class="mr-2">User Manual</span><a href="#user-manual" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="/assets/98a3154230c8767fb147e2b6d44bc923.png" class="popup img-link "><img data-src="/assets/98a3154230c8767fb147e2b6d44bc923.png" alt="98a3154230c8767fb147e2b6d44bc923.png" class="lazyload" data-proofer-ignore></a></p></ul></ul><h2 id="cb2s-module"><span class="mr-2">CB2S Module</span><a href="#cb2s-module" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Pin diagram available online<ul><li>https://developer.tuya.com/en/docs/iot/cb2s-module-datasheet?id=Kafgfsa2aaypq</ul></ul><div class="table-wrapper"><table><thead><tr><th>Pin number<th>Symbol<th>I/O type<th>Function<th> <tbody><tr><td>1<td>3V3<td>P<td>Power supply 3V3<td> <tr><td>2<td>P6<td>I/O<td>Support hardware PWM and correspond to P6 of the IC<td> <tr><td>3<td>GND<td>P<td>Power supply reference ground<td> <tr><td>4<td>P7<td>I/O<td>Support hardware PWM and correspond to P7 of the IC<td> <tr><td>5<td>RX1<td>I/O<td>UART_RX1, which is used for receiving user data and corresponds to P10 of the IC. Do not pull it up. By default, the MCU serial port should be in low-level or high-impedance state.<td> <tr><td>6<td>P8<td>I/O<td>Support hardware PWM and correspond to P8 of the IC<td> <tr><td>7<td>TX1<td>I/O<td>UART_TX1, which is used for transmitting user data and corresponds to P11 of the IC. Do not pull it up. By default, the MCU serial port should be in low-level or high-impedance state.<td> <tr><td>8<td>ADC<td>I/O<td>ADC, which corresponds to P23 of the IC<td> <tr><td>9<td>P24<td>I/O<td>Support hardware PWM and correspond to P24 of the IC<td> <tr><td>10<td>CEN<td>I/O<td>Reset pin<td> <tr><td>11<td>P26<td>I/O<td>Support hardware PWM and correspond to P26 of the IC<td> <tr><td>Test point<td>RX2<td>I/O<td>UART_RX2, which corresponds to P1 of the IC. This pin is not allowed to use.<td> <tr><td>Test point<td>TX2<td>I/O<td>UART_TX2, which is used for outputting logs and corresponds to P0 of the IC<td> <tr><td>Test point<td>CSN<td>I/O<td>Mode selection pin. If it is connected to the ground before being powered on, enter the firmware test mode. If it is not connected or connected to VCC before being powered on, enter the firmware application mode. It corresponds to P21 of the IC.<td> </table></div><ul><li>Drawing of the front and back of module</ul><p><a href="/assets/9998d57df6d15a02be53c27dbfea2246.png" class="popup img-link "><img data-src="/assets/9998d57df6d15a02be53c27dbfea2246.png" alt="9998d57df6d15a02be53c27dbfea2246.png" class="lazyload" data-proofer-ignore></a> <a href="/assets/b7ce6b147b92cbaf9fcf6d267a38c2ba.png" class="popup img-link "><img data-src="/assets/b7ce6b147b92cbaf9fcf6d267a38c2ba.png" alt="b7ce6b147b92cbaf9fcf6d267a38c2ba.png" class="lazyload" data-proofer-ignore></a></p><h1 id="wireless-exploits">Wireless Exploits</h1><ul><li>There has been alot of great work on exploiting these IOT devices that are associated with the TUYA system of systems. The Tuya-Cloudcutter software has been updated and figured I’d give this another shot. I had tried to use this a year or so back without luck, maybe this device will be different…<h2 id="tuya-cloudcutter"><span class="mr-2">Tuya-Cloudcutter</span><a href="#tuya-cloudcutter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><li>https://github.com/tuya-cloudcutter/tuya-cloudcutter<ul><li>“This repository contains the toolchain to exploit a wireless vulnerability that can jailbreak some of the latest smart devices built with the bk7231 chipset under various brand names by Tuya. “<h3 id="background-on-the-exploit"><span class="mr-2">Background on the exploit</span><a href="#background-on-the-exploit" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3></ul><li>https://rb9.nl/posts/2022-03-29-light-jailbreaking-exploiting-tuya-iot-devices/<h2 id="digiblurdiy-guide"><span class="mr-2">DigiblurDIY Guide</span><a href="#digiblurdiy-guide" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><li>I followed DigiblurDIY’s guide to setup a Raspberry Pi 4 (8GB RAM) to work the exploit.<ul><li>https://digiblur.com/2023/08/19/updated-tuya-cloudcutter-with-esphome-bk7231-how-to-guide/<h2 id="total-failure"><span class="mr-2">Total Failure</span><a href="#total-failure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></ul><li>After setting all this up… turns out the device when plugged in would not even power on…. had to crack it open anyways to look at the hardware.</ul><h1 id="teardown--connections">Teardown &amp; Connections</h1><h2 id="external-photos"><span class="mr-2">External Photos</span><a href="#external-photos" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Gotta love triangle security screws… four of them and the top can come off</ul><p><a href="/assets/ad55a0d27be2ab45c4248b5778be4ef6.png" class="popup img-link "><img data-src="/assets/ad55a0d27be2ab45c4248b5778be4ef6.png" alt="ad55a0d27be2ab45c4248b5778be4ef6.png" class="lazyload" data-proofer-ignore></a></p><h2 id="internal-photos-1"><span class="mr-2">Internal Photos</span><a href="#internal-photos-1" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>looks just like the internal photos from FCC database</ul><p><a href="/assets/4d7cc4adb14ffc354636d2a13a29c5f8.png" class="popup img-link "><img data-src="/assets/4d7cc4adb14ffc354636d2a13a29c5f8.png" alt="4d7cc4adb14ffc354636d2a13a29c5f8.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Better look at the CB2S module and the single relay for the 6 outlets</ul><p><a href="/assets/d55df1d95fc5391eb63917db3cc9af00.png" class="popup img-link "><img data-src="/assets/d55df1d95fc5391eb63917db3cc9af00.png" alt="d55df1d95fc5391eb63917db3cc9af00.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Welp…. that might be the issue with it not powering on…</ul><p><a href="/assets/ab7d82d607f73b696687b5509d636a7e.png" class="popup img-link "><img data-src="/assets/ab7d82d607f73b696687b5509d636a7e.png" alt="ab7d82d607f73b696687b5509d636a7e.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Putting it on the pcb holder and mapping out the pins for the serial to usb connection</ul><p><a href="/assets/6eb23ca9283fa0e47758c7de32b765c1.png" class="popup img-link "><img data-src="/assets/6eb23ca9283fa0e47758c7de32b765c1.png" alt="6eb23ca9283fa0e47758c7de32b765c1.png" class="lazyload" data-proofer-ignore></a></p><ul><li>All wired up and connected to the computer</ul><p><a href="/assets/1b3da10d0a485afd817ba72ba532344b.png" class="popup img-link "><img data-src="/assets/1b3da10d0a485afd817ba72ba532344b.png" alt="1b3da10d0a485afd817ba72ba532344b.png" class="lazyload" data-proofer-ignore></a></p><h1 id="firmware-dump">Firmware Dump</h1><ul><li>Serial to USB converter connected up to computer and ltchiptool was used to interact with the CB2S module.<ul><li>https://github.com/libretiny-eu/ltchiptool</ul></ul><h2 id="chip-info"><span class="mr-2">Chip Info</span><a href="#chip-info" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p><a href="/assets/eb202884b3fedfed8cdd6b736e1c2705.png" class="popup img-link "><img data-src="/assets/eb202884b3fedfed8cdd6b736e1c2705.png" alt="eb202884b3fedfed8cdd6b736e1c2705.png" class="lazyload" data-proofer-ignore></a></p><h2 id="read-flash"><span class="mr-2">Read Flash</span><a href="#read-flash" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>Firmware saved twice</ul><p><a href="/assets/b1a6ef58f526bbc2f2a49fb9ea17460b.png" class="popup img-link "><img data-src="/assets/b1a6ef58f526bbc2f2a49fb9ea17460b.png" alt="b1a6ef58f526bbc2f2a49fb9ea17460b.png" class="lazyload" data-proofer-ignore></a></p><ul><li>Reading the firmware with LTChiptool to get pin assignments and configurations</ul><p><a href="/assets/214a31a9016bd2678afbd3228c4f926d.png" class="popup img-link "><img data-src="/assets/214a31a9016bd2678afbd3228c4f926d.png" alt="214a31a9016bd2678afbd3228c4f926d.png" class="lazyload" data-proofer-ignore></a></p><h1 id="esphome">ESPHome</h1><h2 id="esphome-config"><span class="mr-2">ESPHome Config</span><a href="#esphome-config" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-yml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="na">esphome</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">enbrighten_WFD4204_1</span>
<span class="na">bk72xx</span><span class="pi">:</span>
  <span class="na">board</span><span class="pi">:</span> <span class="s">generic-bk7231n-qfn32-tuya</span>
<span class="na">logger</span><span class="pi">:</span>
<span class="na">web_server</span><span class="pi">:</span>
<span class="na">captive_portal</span><span class="pi">:</span>
<span class="na">mdns</span><span class="pi">:</span>
<span class="na">api</span><span class="pi">:</span>
<span class="na">ota</span><span class="pi">:</span>
<span class="na">wifi</span><span class="pi">:</span>
  <span class="na">ssid</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">wifi_ssid2</span>
  <span class="na">password</span><span class="pi">:</span> <span class="kt">!secret</span> <span class="s">wifi_password2</span>
  <span class="na">ap</span><span class="pi">:</span>
<span class="na">text_sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">libretiny</span>
    <span class="na">version</span><span class="pi">:</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">LibreTiny Version</span>
<span class="na">binary_sensor</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">gpio</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">binary_switch_1</span>
    <span class="na">pin</span><span class="pi">:</span>
      <span class="na">number</span><span class="pi">:</span> <span class="s">P8</span>
      <span class="na">inverted</span><span class="pi">:</span> <span class="kc">true</span>
      <span class="na">mode</span><span class="pi">:</span> <span class="s">INPUT_PULLUP</span>
    <span class="na">on_press</span><span class="pi">:</span>
      <span class="na">then</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">switch.toggle</span><span class="pi">:</span> <span class="s">switch_1</span>
<span class="na">switch</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">platform</span><span class="pi">:</span> <span class="s">gpio</span>
    <span class="na">id</span><span class="pi">:</span> <span class="s">switch_1</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">Relay </span><span class="m">1</span>
    <span class="na">pin</span><span class="pi">:</span> <span class="s">P24</span>
<span class="na">status_led</span><span class="pi">:</span>
  <span class="na">pin</span><span class="pi">:</span>
    <span class="na">number</span><span class="pi">:</span> <span class="s">P7</span>
    <span class="na">inverted</span><span class="pi">:</span> <span class="kc">true</span>
</pre></table></code></div></div><ul><li>In Home Assistant and ESPHome, a new device is created matching the device name in the YAML. Device can be installed, downloaded and flashed using LTChiptool.</ul><h2 id="esphome-operation"><span class="mr-2">ESPHome Operation</span><a href="#esphome-operation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>After Flashing and power cycling…. device would not integrate with Home Assistant. Router would see the IP address pop up but when attempting to add device into Home Assistant it would not establish a connection.<li>Disconnecting the PCB from the holder and plugging in to 120v the device would not power on. Clearly the damage PCB was not completing the circuit to power on the device.</ul><h1 id="final-thoughts">Final Thoughts</h1><ul><li>Was able to read and write to the CB2S module but think the power issues and overall damage to the PCB are going to limit the usefulness of the device.<li>Bright side is if I need a CB2S module for another project this is readily available. Not going to be upset over a $2.50 returned item.</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/homelab/'>homelab</a>, <a href='/categories/iot/'>IOT</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/bk7321n/" class="post-tag no-text-decoration" >bk7321n</a> <a href="/tags/iot/" class="post-tag no-text-decoration" >iot</a> <a href="/tags/enbrighten/" class="post-tag no-text-decoration" >enbrighten</a> <a href="/tags/wifi/" class="post-tag no-text-decoration" >wifi</a> <a href="/tags/bt/" class="post-tag no-text-decoration" >bt</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Enbrighten%20-%20WFD4204%20-%20J-WoW%20Learn%202%20Code&url=%2Fposts%2FenbrightenWDF4204%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Enbrighten%20-%20WFD4204%20-%20J-WoW%20Learn%202%20Code&u=%2Fposts%2FenbrightenWDF4204%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FenbrightenWDF4204%2F&text=Enbrighten%20-%20WFD4204%20-%20J-WoW%20Learn%202%20Code" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/UtilitechUTTNOREM2/">Utilitech - UTTNOREM2</a><li><a href="/posts/enbrightenWFD4103/">Enbrighten - WFD4103</a><li><a href="/posts/powsavAHR083/">POWSAV - AHR-083</a><li><a href="/posts/enbrightenWDF4204/">Enbrighten - WFD4204</a><li><a href="/posts/enbrightenWFD4203E/">Enbrighten - WFD4203E</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bt/">bt</a> <a class="post-tag" href="/tags/iot/">iot</a> <a class="post-tag" href="/tags/wifi/">wifi</a> <a class="post-tag" href="/tags/enbrighten/">enbrighten</a> <a class="post-tag" href="/tags/bk7321t/">bk7321t</a> <a class="post-tag" href="/tags/bk7321n/">bk7321n</a> <a class="post-tag" href="/tags/hackrf/">hackrf</a> <a class="post-tag" href="/tags/powsav/">powsav</a> <a class="post-tag" href="/tags/rf/">rf</a> <a class="post-tag" href="/tags/urh/">urh</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/enbrightenWFD4203E/"><div class="card-body"> <em class="small" data-ts="1706979600" data-df="ll" > Feb 3, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Enbrighten - WFD4203E</h3><div class="text-muted small"><p> Dual outdoor smart switch by Enbrighten picked up at the local auction return this week. Device Info Model: WFD4203E FCC ID: QOB-WFD4203 Acquisition Another cheap win at only...</p></div></div></a></div><div class="card"> <a href="/posts/enbrightenWFD4201E/"><div class="card-body"> <em class="small" data-ts="1706965200" data-df="ll" > Feb 3, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Enbrighten - WFD4201E</h3><div class="text-muted small"><p> I picked up this dual outdoor smart switch at the local return auction this week. When I see items like this I typically just bid the minimum and if I win…great. Device Info I start wit...</p></div></div></a></div><div class="card"> <a href="/posts/enbrightenWFD4103/"><div class="card-body"> <em class="small" data-ts="1707670800" data-df="ll" > Feb 11, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Enbrighten - WFD4103</h3><div class="text-muted small"><p> Single smart outlet plug by Enbrighten picked up at the local auction return this week. Below captures my thought process and notes as I attempted to get this flashed over to ESPHome and Home ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/powsavAHR083/" class="btn btn-outline-primary" prompt="Older"><p>POWSAV - AHR-083</p></a> <a href="/posts/enbrightenWFD4103/" class="btn btn-outline-primary" prompt="Newer"><p>Enbrighten - WFD4103</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/bt/">bt</a> <a class="post-tag" href="/tags/iot/">iot</a> <a class="post-tag" href="/tags/wifi/">wifi</a> <a class="post-tag" href="/tags/enbrighten/">enbrighten</a> <a class="post-tag" href="/tags/bk7321t/">bk7321t</a> <a class="post-tag" href="/tags/bk7321n/">bk7321n</a> <a class="post-tag" href="/tags/hackrf/">hackrf</a> <a class="post-tag" href="/tags/powsav/">powsav</a> <a class="post-tag" href="/tags/rf/">rf</a> <a class="post-tag" href="/tags/urh/">urh</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://www.youtube.com/@jwowvsworld">J-WoW</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
